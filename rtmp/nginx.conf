user  nginx;
daemon off;
error_log /dev/stdout info;

events {
  worker_connections 1024;
  multi_accept on;
}

rtmp {
  server {
    listen 1935;
    chunk_size 4096;

    application ${STREAM_APP} {
      live on;
      record off;
      interleave on;
      wait_video on;
      wait_key on;

      # Paso 1: solo validar ingest local (no push a terceros todavía).
      # Podrás verificar con:
      # ffprobe rtmp://localhost/${STREAM_APP}/${STREAM_NAME}
      # y con un reproductor (VLC) remotamente usando rtmp://<VPS_IP>/${STREAM_APP}/${STREAM_NAME}
    }
  }
}

# HTTP bloqueado por ahora; lo abrimos si usamos HLS/DASH en pasos posteriores.
